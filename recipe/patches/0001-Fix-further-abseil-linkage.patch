From a48220c76f0288178ff38d534015bf01c39733a8 Mon Sep 17 00:00:00 2001
From: "Uwe L. Korn" <uwe.korn@quantco.com>
Date: Mon, 18 Sep 2023 14:47:08 +0000
Subject: [PATCH] Fix further abseil linkage

---
 third_party/absl/system.absl.base.BUILD | 12 ++++++++++--
 third_party/absl/system.absl.log.BUILD  |  3 +++
 2 files changed, 13 insertions(+), 2 deletions(-)

diff --git a/third_party/absl/system.absl.base.BUILD b/third_party/absl/system.absl.base.BUILD
index d6bf8748..f6b62c9f 100644
--- a/third_party/absl/system.absl.base.BUILD
+++ b/third_party/absl/system.absl.base.BUILD
@@ -17,12 +17,20 @@ package(default_visibility = ["//visibility:public"])
 
 cc_library(
     name = "log_severity",
-    linkopts = ["-labsl_log_severity"],
+    linkopts = [
+        "-labsl_log_severity",
+        "-labsl_log_internal_message",
+        "-labsl_log_internal_nullguard",
+    ],
 )
 
 cc_library(
     name = "raw_logging_internal",
-    linkopts = ["-labsl_raw_logging_internal"],
+    linkopts = [
+        "-labsl_raw_logging_internal",
+        "-labsl_log_internal_message",
+        "-labsl_log_internal_nullguard",
+    ],
     visibility = [
         "//absl:__subpackages__",
     ],
diff --git a/third_party/absl/system.absl.log.BUILD b/third_party/absl/system.absl.log.BUILD
index 9df9d3ce..89047c7d 100644
--- a/third_party/absl/system.absl.log.BUILD
+++ b/third_party/absl/system.absl.log.BUILD
@@ -6,6 +6,8 @@ cc_library(
     name = "log",
     linkopts = [
 	"-labsl_log_internal_conditions",
+	"-labsl_log_internal_message",
+	"-labsl_log_internal_nullguard",
     ],
 )
 
@@ -14,5 +16,6 @@ cc_library(
     linkopts = [
         "-labsl_log_internal_check_op",
 	"-labsl_log_internal_message",
+	"-labsl_log_internal_nullguard",
     ],
 )
-- 
2.30.2

