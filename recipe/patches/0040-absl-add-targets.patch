From d02156674633ca9653574112788a57f346daf799 Mon Sep 17 00:00:00 2001
From: Eric Lundby <Eric.Lundby@gmail.com>
Date: Mon, 13 Oct 2025 16:18:24 -0600
Subject: [PATCH 1/1] 40

---
 .../third_party/absl/absl/functional/BUILD    | 25 +++++++
 .../third_party/absl/system.absl.base.BUILD   |  7 ++
 .../third_party/absl/system.absl.crc.BUILD    | 25 +++++++
 .../absl/system.absl.functional.BUILD         |  6 ++
 .../third_party/absl/system.absl.log.BUILD    | 71 +++++++++++++++++++
 5 files changed, 134 insertions(+)
 create mode 100644 third_party/xla/third_party/absl/absl/functional/BUILD
 create mode 100644 third_party/xla/third_party/absl/system.absl.crc.BUILD
 create mode 100644 third_party/xla/third_party/absl/system.absl.log.BUILD

diff --git a/third_party/xla/third_party/absl/absl/functional/BUILD b/third_party/xla/third_party/absl/absl/functional/BUILD
new file mode 100644
index 00000000000..b0b0c1b8ffa
--- /dev/null
+++ b/third_party/xla/third_party/absl/absl/functional/BUILD
@@ -0,0 +1,25 @@
+load("@rules_cc//cc:defs.bzl", "cc_library")
+
+package(default_visibility = ["//visibility:public"])
+
+licenses(["notice"])  # Apache
+
+cc_library(
+    name = "overload",
+    linkopts = ["-labsl_base"],
+)
+
+cc_library(
+    name = "function_ref",
+    linkopts = ["-labsl_base"],
+)
+
+cc_library(
+    name = "bind_front",
+    linkopts = ["-labsl_base"],
+)
+
+cc_library(
+    name = "any_invocable",
+    linkopts = ["-labsl_base"],
+)
diff --git a/third_party/xla/third_party/absl/system.absl.base.BUILD b/third_party/xla/third_party/absl/system.absl.base.BUILD
index a0ff1f6492a..8f911cf82a7 100644
--- a/third_party/xla/third_party/absl/system.absl.base.BUILD
+++ b/third_party/xla/third_party/absl/system.absl.base.BUILD
@@ -13,6 +13,7 @@ package(default_visibility = ["//visibility:public"])
     "errno_saver",
     "fast_type_id",
     "pretty_function",
+    "no_destructor",
 ]]
 
 cc_library(
@@ -27,6 +28,11 @@ cc_library(
 
 cc_library(
     name = "nullability",
+    defines = [
+        "absl_nonnull=",
+        "absl_nullable=", 
+        "absl_nullability_unknown=",
+    ],
     deps = [
         ":core_headers",
         "//absl/meta:type_traits",
@@ -79,6 +85,7 @@ cc_library(
     deps = [
         ":log_severity",
         ":raw_logging_internal",
+        ":nullability",
         ":spinlock_wait",
     ],
 )
diff --git a/third_party/xla/third_party/absl/system.absl.crc.BUILD b/third_party/xla/third_party/absl/system.absl.crc.BUILD
new file mode 100644
index 00000000000..23d041be092
--- /dev/null
+++ b/third_party/xla/third_party/absl/system.absl.crc.BUILD
@@ -0,0 +1,25 @@
+load("@rules_cc//cc:defs.bzl", "cc_library")
+
+package(default_visibility = ["//visibility:public"])
+
+licenses(["notice"])  # Apache
+
+cc_library(
+    name = "crc32c",
+    linkopts = ["-labsl_crc32c"],
+)
+
+cc_library(
+    name = "crc_cord_state",
+    linkopts = ["-labsl_crc_cord_state"],
+)
+
+cc_library(
+    name = "crc_internal",
+    linkopts = ["-labsl_crc_internal"],
+)
+
+cc_library(
+    name = "non_temporal_memcpy",
+    linkopts = ["-labsl_base"],
+)
diff --git a/third_party/xla/third_party/absl/system.absl.functional.BUILD b/third_party/xla/third_party/absl/system.absl.functional.BUILD
index 9439bd0ba22..c2b0b9c43e3 100644
--- a/third_party/xla/third_party/absl/system.absl.functional.BUILD
+++ b/third_party/xla/third_party/absl/system.absl.functional.BUILD
@@ -2,6 +2,12 @@ load("@rules_cc//cc:defs.bzl", "cc_library")
 
 package(default_visibility = ["//visibility:public"])
 
+
+cc_library(
+    name = "overload",
+    linkopts = ["-labsl_base"],
+)
+
 cc_library(
     name = "any_invocable",
 )
diff --git a/third_party/xla/third_party/absl/system.absl.log.BUILD b/third_party/xla/third_party/absl/system.absl.log.BUILD
new file mode 100644
index 00000000000..f4606e1f016
--- /dev/null
+++ b/third_party/xla/third_party/absl/system.absl.log.BUILD
@@ -0,0 +1,71 @@
+load("@rules_cc//cc:defs.bzl", "cc_library")
+
+package(default_visibility = ["//visibility:public"])
+
+licenses(["notice"])  # Apache
+
+cc_library(
+    name = "absl_log",
+    linkopts = [
+        "-labsl_vlog_config_internal",
+        "-labsl_log_internal_conditions",
+        "-labsl_log_internal_check_op",
+        "-labsl_log_internal_message",
+        "-labsl_log_internal_nullguard",
+    ],
+)
+
+cc_library(
+    name = "absl_check",
+    linkopts = [
+        "-labsl_vlog_config_internal",
+        "-labsl_log_internal_check_op",
+        "-labsl_log_internal_message",
+        "-labsl_log_internal_nullguard",
+    ],
+)
+
+alias(
+    name = "log",
+    actual = ":absl_log",
+)
+
+alias(
+    name = "check",
+    actual = ":absl_check",
+)
+
+cc_library(
+    name = "die_if_null",
+    linkopts = ["-labsl_die_if_null"],
+)
+
+cc_library(
+    name = "log_entry",
+    linkopts = ["-labsl_log_internal_message"],
+)
+
+cc_library(
+    name = "log_sink",
+    linkopts = ["-labsl_log_sink"],
+)
+
+cc_library(
+    name = "log_sink_registry",
+    linkopts = ["-labsl_log_sink"],
+)
+
+cc_library(
+    name = "globals",
+    linkopts = ["-labsl_log_globals"],
+)
+
+cc_library(
+    name = "log_flags",
+    linkopts = ["-labsl_log_flags"],
+)
+
+cc_library(
+    name = "initialize",
+    linkopts = ["-labsl_log_initialize"],
+)
-- 
2.45.2
