From c21824084694980893e2ccce9124ab83848bd34c Mon Sep 17 00:00:00 2001
From: "Uwe L. Korn" <uwe.korn@quantco.com>
Date: Fri, 27 Oct 2023 11:21:38 +0200
Subject: [PATCH 3/4] Use correct, hermetic python

---
 .../quantization/tensorflow/gen_quantized_function_library.py | 4 ++++
 tensorflow/python/tools/api/generator/create_python_api.py    | 1 +
 2 files changed, 5 insertions(+)

diff --git a/tensorflow/compiler/mlir/quantization/tensorflow/gen_quantized_function_library.py b/tensorflow/compiler/mlir/quantization/tensorflow/gen_quantized_function_library.py
index 8352b974..c7f5fdd0 100644
--- a/tensorflow/compiler/mlir/quantization/tensorflow/gen_quantized_function_library.py
+++ b/tensorflow/compiler/mlir/quantization/tensorflow/gen_quantized_function_library.py
@@ -14,6 +14,10 @@
 # ==============================================================================
 """Generates the quantized function library contained header file."""
 
+import sys
+import os
+sys.path.append(os.environ['PYTHON_LIB_PATH'])
+
 import ast
 import re
 import string
diff --git a/tensorflow/python/tools/api/generator/create_python_api.py b/tensorflow/python/tools/api/generator/create_python_api.py
index 742cc879..8037ae8c 100644
--- a/tensorflow/python/tools/api/generator/create_python_api.py
+++ b/tensorflow/python/tools/api/generator/create_python_api.py
@@ -18,6 +18,7 @@ import collections
 import importlib
 import os
 import sys
+sys.path.append(os.environ['PYTHON_LIB_PATH'])
 
 from tensorflow.python.tools.api.generator import doc_srcs
 from tensorflow.python.util import tf_decorator
-- 
2.39.3 (Apple Git-145)

